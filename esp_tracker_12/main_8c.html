<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP 12 Tracker: C:/msys32/home/hatta/esp/tracker/main/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP 12 Tracker<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('main_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main application file for ESP12 integrating SIM800L, NEO-6M GPS, and OTA update functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;freertos/semphr.h&quot;</code><br />
<code>#include &quot;driver/uart.h&quot;</code><br />
<code>#include &quot;driver/gpio.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_u_a_r_t_8h_source.html">../components/UART/UART.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sim800_l__driver_8h_source.html">../components/sim800L_driver/sim800L_driver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_n_e_o__6_m_8h_source.html">../components/NEO_6M_driver/NEO_6M.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_o_t_a_8h_source.html">../components/OTA/OTA.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#a_c_1_2msys32_2home_2hatta_2esp_2tracker_2main_2main_8c" alt=""/></div>
<map name="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2main_2main_8c" id="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2main_2main_8c">
<area shape="rect" title="Main application file for ESP12 integrating SIM800L, NEO&#45;6M GPS, and OTA update functionality." alt="" coords="1068,5,1233,48"/>
<area shape="rect" title=" " alt="" coords="1113,427,1255,453"/>
<area shape="poly" title=" " alt="" coords="1147,49,1136,95,1126,159,1121,231,1128,303,1147,363,1171,412,1167,414,1142,365,1123,305,1116,231,1120,158,1131,94,1142,48"/>
<area shape="rect" title=" " alt="" coords="567,427,673,453"/>
<area shape="poly" title=" " alt="" coords="1068,35,790,53,616,68,438,87,272,111,135,139,82,154,41,171,16,189,10,198,8,207,8,292,12,311,24,328,44,344,69,358,137,382,219,401,309,415,399,424,552,434,552,439,399,430,308,420,218,406,135,388,67,363,41,348,20,332,7,313,3,292,3,206,5,196,12,185,39,167,80,149,134,133,271,105,437,82,615,63,790,48,1067,30"/>
<area shape="rect" title=" " alt="" coords="2105,427,2228,453"/>
<area shape="poly" title=" " alt="" coords="1234,28,1403,38,1629,63,1754,83,1883,110,2010,143,2133,184,2180,200,2217,215,2249,237,2277,276,2282,300,2279,330,2271,359,2261,380,2239,404,2212,421,2209,417,2235,400,2256,377,2266,357,2274,329,2277,301,2272,278,2245,241,2215,220,2178,205,2131,189,2009,148,1882,115,1754,89,1628,69,1402,43,1234,33"/>
<area shape="rect" title=" " alt="" coords="1138,277,1228,304"/>
<area shape="poly" title=" " alt="" coords="1156,48,1182,261,1177,262,1151,49"/>
<area shape="rect" title=" " alt="" coords="43,277,136,304"/>
<area shape="poly" title=" " alt="" coords="1068,51,151,277,150,272,1067,46"/>
<area shape="rect" title=" " alt="" coords="1320,427,1381,453"/>
<area shape="poly" title=" " alt="" coords="1162,47,1182,95,1214,176,1237,240,1262,302,1304,377,1331,413,1326,417,1299,380,1258,304,1232,242,1209,178,1178,97,1157,49"/>
<area shape="rect" title=" " alt="" coords="2252,427,2316,453"/>
<area shape="poly" title=" " alt="" coords="1234,28,1551,42,1756,54,1965,72,2162,95,2326,125,2390,142,2438,161,2470,182,2478,194,2481,206,2481,292,2477,319,2466,343,2449,364,2428,382,2380,410,2332,428,2330,423,2377,405,2425,377,2445,360,2461,340,2472,317,2476,292,2476,207,2473,196,2466,186,2436,166,2388,147,2324,130,2161,101,1965,77,1755,60,1551,47,1234,33"/>
<area shape="rect" href="_u_a_r_t_8h.html" title="this file contains the header for UART communication using" alt="" coords="641,187,786,229"/>
<area shape="poly" title=" " alt="" coords="1102,51,779,183,777,178,1099,46"/>
<area shape="rect" href="sim800_l__driver_8h.html" title="SIM800L driver configuration for ESP12/ESP8266." alt="" coords="1454,187,1618,229"/>
<area shape="poly" title=" " alt="" coords="1234,31,1311,38,1393,51,1465,69,1493,81,1513,94,1525,111,1534,131,1540,171,1535,172,1529,132,1521,114,1509,98,1490,85,1463,74,1392,56,1311,44,1233,36"/>
<area shape="rect" href="_n_e_o__6_m_8h.html" title="NEO&#45;6M GPS driver for ESP12/ESP8266." alt="" coords="1336,96,1498,139"/>
<area shape="poly" title=" " alt="" coords="1214,46,1341,88,1339,93,1212,51"/>
<area shape="rect" href="_o_t_a_8h.html" title="OTA update module for ESP12/ESP8266." alt="" coords="810,352,985,379"/>
<area shape="poly" title=" " alt="" coords="1130,50,1083,98,1032,164,984,232,914,341,910,338,979,229,1027,161,1079,94,1126,47"/>
<area shape="poly" title=" " alt="" coords="755,227,1056,376,1144,417,1141,422,1054,381,752,232"/>
<area shape="poly" title=" " alt="" coords="768,228,796,243,818,261,830,282,829,294,823,306,804,324,784,333,762,335,740,334,696,334,675,340,654,354,635,381,626,412,621,410,631,379,650,350,673,335,696,328,741,329,762,330,782,328,801,320,819,302,824,292,825,283,814,264,793,247,765,232"/>
<area shape="poly" title=" " alt="" coords="787,219,1123,276,1122,282,786,224"/>
<area shape="poly" title=" " alt="" coords="641,219,423,244,155,280,151,281,150,275,154,275,423,239,641,214"/>
<area shape="poly" title=" " alt="" coords="771,227,1307,420,1305,425,770,232"/>
<area shape="rect" href="my__config_8h_source.html" title=" " alt="" coords="697,427,866,453"/>
<area shape="poly" title=" " alt="" coords="641,216,521,226,384,240,267,258,228,268,207,279,202,291,207,302,230,317,273,332,401,366,553,396,690,421,689,426,552,402,400,371,271,338,227,321,203,306,197,291,203,276,226,263,266,252,383,234,520,220,641,211"/>
<area shape="rect" title=" " alt="" coords="735,277,809,304"/>
<area shape="poly" title=" " alt="" coords="731,228,756,263,752,266,726,232"/>
<area shape="rect" title=" " alt="" coords="890,427,958,453"/>
<area shape="poly" title=" " alt="" coords="641,215,513,223,373,240,314,252,270,267,256,275,248,284,246,292,251,302,279,313,342,329,532,365,875,424,874,429,532,371,341,334,277,318,248,306,241,293,243,281,253,271,268,262,312,247,372,235,512,218,641,210"/>
<area shape="rect" title=" " alt="" coords="262,277,365,304"/>
<area shape="poly" title=" " alt="" coords="641,226,381,279,380,273,640,221"/>
<area shape="rect" title=" " alt="" coords="389,277,574,304"/>
<area shape="poly" title=" " alt="" coords="654,232,533,274,532,269,653,227"/>
<area shape="rect" title=" " alt="" coords="598,277,711,304"/>
<area shape="poly" title=" " alt="" coords="700,232,675,266,671,263,696,228"/>
<area shape="poly" title=" " alt="" coords="1506,232,1387,306,1303,354,1213,419,1210,415,1300,350,1384,302,1503,227"/>
<area shape="poly" title=" " alt="" coords="1484,232,1373,271,1241,307,1174,318,1116,324,1017,325,920,330,864,338,798,355,719,386,654,421,652,416,717,381,797,349,862,333,919,324,1017,320,1116,318,1173,313,1239,301,1371,266,1482,227"/>
<area shape="poly" title=" " alt="" coords="1619,212,1719,225,1840,250,1904,268,1968,290,2030,317,2088,350,2124,380,2152,412,2148,416,2120,384,2085,354,2027,322,1966,295,1902,273,1839,255,1718,231,1618,218"/>
<area shape="poly" title=" " alt="" coords="1455,230,1244,278,1243,273,1453,225"/>
<area shape="poly" title=" " alt="" coords="1618,209,1786,216,1984,229,2158,248,2218,260,2252,275,2275,306,2287,343,2291,379,2290,411,2285,411,2285,380,2281,344,2270,309,2249,279,2217,265,2157,253,1984,234,1786,221,1618,214"/>
<area shape="rect" href="my__print_8h.html" title=" " alt="" coords="1313,352,1471,379"/>
<area shape="poly" title=" " alt="" coords="1531,231,1515,268,1489,306,1462,329,1434,347,1431,342,1459,324,1485,302,1510,265,1527,229"/>
<area shape="rect" href="web_8h.html" title="this file contains the header for web server functionality" alt="" coords="1736,277,1832,304"/>
<area shape="poly" title=" " alt="" coords="1601,227,1731,269,1729,275,1599,232"/>
<area shape="rect" title=" " alt="" coords="2149,277,2238,304"/>
<area shape="poly" title=" " alt="" coords="1619,214,1849,238,2130,275,2134,275,2133,281,2129,280,1848,244,1618,220"/>
<area shape="poly" title=" " alt="" coords="1357,382,1236,424,1234,419,1355,377"/>
<area shape="poly" title=" " alt="" coords="1313,374,1041,393,867,408,688,429,688,424,867,403,1040,387,1313,368"/>
<area shape="poly" title=" " alt="" coords="1472,371,2052,424,2090,428,2089,433,2052,429,1471,376"/>
<area shape="poly" title=" " alt="" coords="1387,381,1368,415,1363,412,1382,378"/>
<area shape="poly" title=" " alt="" coords="1471,371,1534,376,1730,386,1885,390,2040,398,2130,408,2237,424,2236,429,2130,413,2039,403,1885,395,1730,392,1533,381,1471,376"/>
<area shape="poly" title=" " alt="" coords="1313,378,882,429,881,424,1313,373"/>
<area shape="poly" title=" " alt="" coords="1313,378,1160,398,974,429,973,424,1159,393,1312,373"/>
<area shape="rect" title=" " alt="" coords="1915,427,2040,453"/>
<area shape="poly" title=" " alt="" coords="1471,374,1900,426,1899,432,1471,379"/>
<area shape="rect" title=" " alt="" coords="1454,427,1543,453"/>
<area shape="poly" title=" " alt="" coords="1412,377,1469,415,1466,420,1409,381"/>
<area shape="rect" title=" " alt="" coords="1731,427,1808,453"/>
<area shape="poly" title=" " alt="" coords="1459,377,1716,426,1715,431,1458,382"/>
<area shape="poly" title=" " alt="" coords="1736,303,1641,322,1534,354,1509,367,1484,381,1395,422,1393,417,1481,376,1506,362,1532,350,1640,317,1735,297"/>
<area shape="poly" title=" " alt="" coords="1833,296,1950,315,2019,331,2087,349,2175,383,2248,417,2246,422,2173,388,2086,355,2018,336,1949,321,1832,301"/>
<area shape="poly" title=" " alt="" coords="1736,304,1476,351,1475,346,1735,298"/>
<area shape="poly" title=" " alt="" coords="1833,293,1896,299,1966,310,2028,326,2051,337,2067,350,2073,361,2074,371,2064,390,2045,407,2022,421,2019,417,2042,403,2060,387,2069,370,2068,362,2063,354,2049,342,2026,331,1965,315,1895,304,1832,298"/>
<area shape="poly" title=" " alt="" coords="1833,293,1898,301,1963,316,1989,327,2006,342,2010,360,1999,381,1976,393,1935,403,1815,420,1676,431,1559,439,1558,433,1676,426,1814,414,1934,398,1974,388,1995,377,2005,359,2001,344,1986,332,1962,321,1897,306,1832,298"/>
<area shape="poly" title=" " alt="" coords="1833,290,1911,294,1993,307,2025,318,2047,334,2053,344,2055,355,2052,367,2043,380,2029,393,2007,403,1950,419,1884,430,1824,437,1823,432,1883,425,1948,414,2005,398,2026,388,2039,377,2047,365,2050,354,2048,345,2043,337,2023,323,1991,312,1911,299,1833,295"/>
<area shape="rect" title=" " alt="" coords="1679,352,1764,379"/>
<area shape="poly" title=" " alt="" coords="1775,306,1744,342,1740,338,1771,303"/>
<area shape="rect" title=" " alt="" coords="1788,352,1881,379"/>
<area shape="poly" title=" " alt="" coords="1795,303,1820,338,1815,341,1791,306"/>
<area shape="rect" title=" " alt="" coords="1905,352,1986,379"/>
<area shape="poly" title=" " alt="" coords="1813,302,1904,343,1902,348,1811,307"/>
<area shape="rect" title=" " alt="" coords="1545,352,1655,379"/>
<area shape="poly" title=" " alt="" coords="1753,307,1647,348,1645,343,1751,302"/>
<area shape="poly" title=" " alt="" coords="1405,141,1204,416,1200,412,1400,138"/>
<area shape="poly" title=" " alt="" coords="1353,142,999,255,824,315,725,354,680,385,644,418,640,414,677,381,723,350,822,310,998,250,1351,137"/>
<area shape="poly" title=" " alt="" coords="1499,119,1684,131,1796,142,1911,157,2022,177,2121,203,2200,236,2230,255,2253,276,2263,294,2265,313,2261,333,2252,352,2225,389,2196,418,2192,414,2221,385,2247,350,2256,331,2260,313,2258,295,2249,279,2227,259,2198,240,2119,208,2021,182,1910,162,1795,147,1683,136,1499,124"/>
<area shape="poly" title=" " alt="" coords="1391,141,1213,270,1210,266,1387,137"/>
<area shape="poly" title=" " alt="" coords="1499,119,1650,126,1833,139,2008,158,2079,170,2133,184,2180,200,2217,215,2248,237,2277,276,2291,310,2296,347,2296,382,2292,412,2287,411,2290,382,2291,347,2285,312,2272,279,2244,241,2214,219,2178,205,2131,189,2078,175,2007,163,1833,144,1650,132,1499,124"/>
<area shape="poly" title=" " alt="" coords="1446,137,1498,175,1494,179,1443,141"/>
<area shape="poly" title=" " alt="" coords="1418,139,1397,337,1392,336,1413,139"/>
<area shape="poly" title=" " alt="" coords="1500,137,1565,157,1631,184,1701,225,1758,265,1755,270,1698,229,1628,189,1563,162,1498,142"/>
<area shape="poly" title=" " alt="" coords="948,377,1120,420,1118,425,947,382"/>
<area shape="poly" title=" " alt="" coords="850,382,684,425,682,420,848,377"/>
<area shape="poly" title=" " alt="" coords="986,367,1442,386,1745,403,2052,424,2090,427,2089,433,2052,429,1745,408,1442,392,985,372"/>
<area shape="rect" title=" " alt="" coords="983,427,1089,453"/>
<area shape="poly" title=" " alt="" coords="923,377,999,417,997,421,920,382"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a842c6d67d4cbff781fc513fe5b0a3249" id="r_a842c6d67d4cbff781fc513fe5b0a3249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a842c6d67d4cbff781fc513fe5b0a3249">init_esp</a> ()</td></tr>
<tr class="memdesc:a842c6d67d4cbff781fc513fe5b0a3249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC.  <br /></td></tr>
<tr class="separator:a842c6d67d4cbff781fc513fe5b0a3249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630544a7f0a2cc40d8a7fefab7e2fe70" id="r_a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a630544a7f0a2cc40d8a7fefab7e2fe70">app_main</a> (void)</td></tr>
<tr class="memdesc:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main application entry point for ESP8266.  <br /></td></tr>
<tr class="separator:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main application file for ESP12 integrating SIM800L, NEO-6M GPS, and OTA update functionality. </p>
<dl class="section author"><dt>Author</dt><dd>yassine hattay (<a href="#" onclick="location.href='mai'+'lto:'+'hat'+'ta'+'yya'+'ss'+'ine'+'51'+'9@g'+'ma'+'il.'+'co'+'m'; return false;">hatta<span class="obfuscator">.nosp@m.</span>yyas<span class="obfuscator">.nosp@m.</span>sine5<span class="obfuscator">.nosp@m.</span>19@g<span class="obfuscator">.nosp@m.</span>mail.<span class="obfuscator">.nosp@m.</span>com</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-05-28 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a630544a7f0a2cc40d8a7fefab7e2fe70" name="a630544a7f0a2cc40d8a7fefab7e2fe70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630544a7f0a2cc40d8a7fefab7e2fe70">&#9670;&#160;</a></span>app_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main application entry point for ESP8266. </p>
<p>This function initializes the ESP peripherals, configures GPIOs for status indicators, starts FreeRTOS tasks, and continuously monitors the battery voltage using the ADC.</p>
<p>Initialization and setup steps:</p><ol type="1">
<li><b>ESP Peripheral Initialization:</b> <br  />
<ul>
<li>Calls <code><a class="el" href="#a842c6d67d4cbff781fc513fe5b0a3249" title="Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC.">init_esp()</a></code> to initialize UART, ADC, and OTA-related GPIO and semaphore.</li>
</ul>
</li>
<li><b>GPIO Configuration for LEDs/Status Pins:</b> <br  />
<ul>
<li>Configures <code>GPS_gpio</code> and <code>SIM_gpio</code> as output pins without pull-up/pull-down. <br  />
</li>
<li>Sets initial levels: GPS low (0), SIM high (1).</li>
</ul>
</li>
<li><b>Task Creation:</b> <br  />
<ul>
<li>Creates <code>ota_task</code> with priority 11 and <code>gps_task</code> with priority 10.</li>
</ul>
</li>
<li><b>Battery Monitoring Loop:</b> <br  />
<ul>
<li>Samples the ADC 100 times every 5 seconds. <br  />
</li>
<li>Computes the average ADC value and scales it using the measured ADC reference. <br  />
</li>
<li>Calculates battery voltage using the divider ratio (based on the resistor network). <br  />
</li>
<li>Prints ADC average, ADC voltage, and battery voltage to console. <br  />
</li>
<li>Warns if battery voltage falls below 3.4 V.</li>
</ul>
</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>The function runs an infinite loop and never returns. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph.png" border="0" usemap="#amain_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph" alt=""/></div>
<map name="amain_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph" id="amain_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph">
<area shape="rect" title="Main application entry point for ESP8266." alt="" coords="5,56,83,83"/>
<area shape="rect" href="_n_e_o__6_m_8c.html#afa212fc008a24b9f857753a544f750ca" title="GPS task to read NMEA sentences from the GPS module and extract coordinates." alt="" coords="131,5,205,32"/>
<area shape="poly" title=" " alt="" coords="77,53,119,36,121,41,79,58"/>
<area shape="rect" href="main_8c.html#a842c6d67d4cbff781fc513fe5b0a3249" title="Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC." alt="" coords="135,56,201,83"/>
<area shape="poly" title=" " alt="" coords="83,67,119,67,119,72,83,72"/>
<area shape="rect" href="_o_t_a_8c.html#aa254c8b163be4af70cf47c34d24f19bb" title="FreeRTOS task handling OTA updates." alt="" coords="132,107,204,133"/>
<area shape="poly" title=" " alt="" coords="79,81,121,98,119,103,77,86"/>
<area shape="rect" href="_u_a_r_t_8c.html#a7f8cf56e097fa247abe78e9b01353a08" title="Initializes a UART peripheral with specified settings." alt="" coords="262,5,354,32"/>
<area shape="poly" title=" " alt="" coords="200,55,254,35,256,40,202,60"/>
<area shape="rect" href="_o_t_a_8c.html#a0a5bcaba85a8adb52f779d3a769dd896" title="GPIO interrupt service routine for OTA triggering." alt="" coords="253,56,362,83"/>
<area shape="poly" title=" " alt="" coords="201,67,237,67,237,72,201,72"/>
<area shape="rect" href="_o_t_a_8c.html#a6e5e76e2aaf4e4626c6eb61ff3063c07" title="Performs an over&#45;the&#45;air (OTA) firmware update." alt="" coords="265,107,350,133"/>
<area shape="poly" title=" " alt="" coords="204,117,250,117,250,123,204,123"/>
<area shape="rect" href="web_8c.html#a720913f2342db3713ec3948cdfc16855" title="Initializes the ESP32 as a Wi&#45;Fi station and connects to an access point." alt="" coords="410,107,501,133"/>
<area shape="poly" title=" " alt="" coords="351,117,395,117,395,123,351,123"/>
</map>
</div>

</div>
</div>
<a id="a842c6d67d4cbff781fc513fe5b0a3249" name="a842c6d67d4cbff781fc513fe5b0a3249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a842c6d67d4cbff781fc513fe5b0a3249">&#9670;&#160;</a></span>init_esp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_esp </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC. </p>
<p>This function performs the initial setup of core ESP microcontroller peripherals required for the application. It configures UART communication, sets up OTA interrupt handling, and initializes the ADC for analog readings.</p>
<p>The initialization steps include:</p><ol type="1">
<li><b>UART Initialization:</b> <br  />
<ul>
<li>Creates a <code><a class="el" href="structuart__t.html" title="Represents a UART (Universal Asynchronous Receiver-Transmitter) configuration.">uart_t</a></code> structure with default parameters (UART0, baud rate 9600, etc.). <br  />
</li>
<li>Calls <code><a class="el" href="_u_a_r_t_8c.html#a7f8cf56e097fa247abe78e9b01353a08" title="Initializes a UART peripheral with specified settings.">my_uart_init()</a></code> to configure the UART peripheral.</li>
</ul>
</li>
<li><b>OTA Semaphore:</b> <br  />
<ul>
<li>Creates a binary semaphore <code>ota_sem</code> for OTA update handling.</li>
</ul>
</li>
<li><b>OTA GPIO Interrupt Configuration:</b> <br  />
<ul>
<li>Configures the <code>OTA_GPIO</code> pin as input with pull-up enabled. <br  />
</li>
<li>Sets interrupt type to negative edge (<code>GPIO_INTR_NEGEDGE</code>). <br  />
</li>
<li>Installs ISR service and attaches <code>ota_isr_handler</code> to the GPIO.</li>
</ul>
</li>
<li><b>ADC Initialization:</b> <br  />
<ul>
<li>Configures ADC with <code>ADC_READ_TOUT_MODE</code> for reading A0 pin. <br  />
</li>
<li>Sets the sample clock divider (<code>clk_div</code>) to 8. <br  />
</li>
<li>Calls <code>adc_init()</code> and checks for successful initialization.</li>
</ul>
</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>Prints status messages to indicate successful initialization or errors. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_a842c6d67d4cbff781fc513fe5b0a3249_cgraph.png" border="0" usemap="#amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_cgraph" alt=""/></div>
<map name="amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_cgraph" id="amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_cgraph">
<area shape="rect" title="Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC." alt="" coords="5,31,72,57"/>
<area shape="rect" href="_u_a_r_t_8c.html#a7f8cf56e097fa247abe78e9b01353a08" title="Initializes a UART peripheral with specified settings." alt="" coords="128,5,220,32"/>
<area shape="poly" title=" " alt="" coords="72,35,112,27,113,33,73,40"/>
<area shape="rect" href="_o_t_a_8c.html#a0a5bcaba85a8adb52f779d3a769dd896" title="GPIO interrupt service routine for OTA triggering." alt="" coords="120,56,229,83"/>
<area shape="poly" title=" " alt="" coords="73,48,105,54,104,59,72,53"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_a842c6d67d4cbff781fc513fe5b0a3249_icgraph.png" border="0" usemap="#amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_icgraph" alt=""/></div>
<map name="amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_icgraph" id="amain_8c_a842c6d67d4cbff781fc513fe5b0a3249_icgraph">
<area shape="rect" title="Initializes essential ESP peripherals including UART, OTA, GPIO, and ADC." alt="" coords="131,5,197,32"/>
<area shape="rect" href="main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application entry point for ESP8266." alt="" coords="5,5,83,32"/>
<area shape="poly" title=" " alt="" coords="115,21,83,21,83,16,115,16"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
