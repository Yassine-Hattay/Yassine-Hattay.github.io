<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP 12 Tracker: C:/msys32/home/hatta/esp/tracker/components/sim800L_driver/sim800L_driver.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP 12 Tracker<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('sim800_l__driver_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sim800L_driver.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>SIM800L driver configuration for ESP12/ESP8266.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="my__print_8h_source.html">../debugging/my_print.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="web_8h_source.html">../web/web.h</a>&quot;</code><br />
<code>#include &lt;driver/uart.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;freertos/semphr.h&quot;</code><br />
<code>#include &quot;driver/adc.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sim800L_driver.h:</div>
<div class="dyncontent">
<div class="center"><img src="sim800_l__driver_8h__incl.png" border="0" usemap="#a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8h" alt=""/></div>
<map name="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8h" id="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8h">
<area shape="rect" title="SIM800L driver configuration for ESP12/ESP8266." alt="" coords="743,5,909,80"/>
<area shape="rect" href="my__print_8h.html" title=" " alt="" coords="394,203,551,229"/>
<area shape="poly" title=" " alt="" coords="751,83,513,198,511,193,749,78"/>
<area shape="rect" title=" " alt="" coords="5,277,148,304"/>
<area shape="poly" title=" " alt="" coords="743,55,573,80,475,102,380,131,301,163,225,201,109,271,107,266,223,197,299,158,378,125,474,97,572,75,742,49"/>
<area shape="rect" title=" " alt="" coords="172,277,296,304"/>
<area shape="poly" title=" " alt="" coords="743,52,673,61,592,76,508,99,428,130,376,161,328,199,257,268,253,264,325,194,373,157,426,126,507,94,591,71,672,56,742,47"/>
<area shape="rect" title=" " alt="" coords="320,277,425,304"/>
<area shape="poly" title=" " alt="" coords="743,51,656,64,607,75,557,90,508,110,462,135,420,167,384,204,377,217,372,232,371,262,366,262,367,231,372,215,380,201,416,163,459,131,506,105,556,85,606,70,655,58,742,46"/>
<area shape="rect" title=" " alt="" coords="1183,277,1247,304"/>
<area shape="poly" title=" " alt="" coords="910,43,1001,54,1052,65,1105,80,1156,100,1204,127,1248,160,1284,201,1290,220,1283,239,1268,256,1251,271,1247,267,1265,252,1278,236,1284,220,1279,204,1244,164,1201,131,1154,105,1103,85,1051,70,1000,59,909,48"/>
<area shape="rect" href="web_8h.html" title="this file contains the header for web server functionality" alt="" coords="896,128,993,155"/>
<area shape="poly" title=" " alt="" coords="873,78,919,116,916,120,869,83"/>
<area shape="rect" title=" " alt="" coords="1345,128,1435,155"/>
<area shape="poly" title=" " alt="" coords="910,55,1326,125,1330,126,1329,131,1325,131,909,60"/>
<area shape="rect" title=" " alt="" coords="1458,128,1548,155"/>
<area shape="poly" title=" " alt="" coords="910,51,1146,80,1444,125,1443,130,1145,85,909,56"/>
<area shape="rect" href="my__config_8h_source.html" title=" " alt="" coords="450,277,618,304"/>
<area shape="poly" title=" " alt="" coords="485,228,516,264,512,267,481,232"/>
<area shape="poly" title=" " alt="" coords="404,233,161,277,160,271,403,227"/>
<area shape="poly" title=" " alt="" coords="432,232,291,275,290,270,430,227"/>
<area shape="poly" title=" " alt="" coords="457,232,404,270,401,266,454,228"/>
<area shape="rect" title=" " alt="" coords="1034,277,1159,304"/>
<area shape="poly" title=" " alt="" coords="552,225,563,227,790,249,1019,274,1018,280,789,255,563,232,551,231"/>
<area shape="rect" title=" " alt="" coords="735,277,823,304"/>
<area shape="poly" title=" " alt="" coords="527,227,720,273,719,278,526,233"/>
<area shape="rect" title=" " alt="" coords="847,277,924,304"/>
<area shape="poly" title=" " alt="" coords="552,226,680,246,832,274,831,279,679,252,551,231"/>
<area shape="rect" title=" " alt="" coords="949,277,1009,304"/>
<area shape="poly" title=" " alt="" coords="552,225,563,227,748,246,830,256,934,275,933,280,829,261,747,251,563,232,551,230"/>
<area shape="poly" title=" " alt="" coords="552,225,563,227,732,240,865,244,998,252,1168,275,1167,280,998,257,865,249,732,245,563,232,551,231"/>
<area shape="rect" title=" " alt="" coords="642,277,711,304"/>
<area shape="poly" title=" " alt="" coords="509,227,628,269,626,274,507,232"/>
<area shape="poly" title=" " alt="" coords="896,153,567,203,566,198,895,147"/>
<area shape="poly" title=" " alt="" coords="969,153,1002,174,1036,201,1063,232,1084,262,1079,266,1058,235,1032,205,999,178,966,157"/>
<area shape="poly" title=" " alt="" coords="947,155,941,192,933,212,921,231,885,253,834,274,832,269,883,249,917,227,928,210,936,190,941,154"/>
<area shape="poly" title=" " alt="" coords="954,154,968,189,971,210,966,230,949,254,927,271,924,267,945,250,961,228,965,210,963,190,950,156"/>
<area shape="poly" title=" " alt="" coords="969,153,995,173,1016,202,1020,219,1017,236,1002,266,997,264,1012,234,1015,219,1011,204,991,177,966,157"/>
<area shape="poly" title=" " alt="" coords="972,153,1066,200,1183,267,1180,271,1063,205,969,157"/>
<area shape="rect" title=" " alt="" coords="1184,203,1270,229"/>
<area shape="poly" title=" " alt="" coords="994,152,1170,197,1169,202,992,158"/>
<area shape="rect" title=" " alt="" coords="576,203,668,229"/>
<area shape="poly" title=" " alt="" coords="896,156,684,204,683,198,895,151"/>
<area shape="rect" title=" " alt="" coords="692,203,773,229"/>
<area shape="poly" title=" " alt="" coords="908,158,785,200,783,195,907,153"/>
<area shape="rect" title=" " alt="" coords="797,203,908,229"/>
<area shape="poly" title=" " alt="" coords="930,157,882,195,878,191,927,153"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="sim800_l__driver_8h__dep__incl.png" border="0" usemap="#a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8hdep" alt=""/></div>
<map name="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8hdep" id="a_c_1_2msys32_2home_2hatta_2esp_2tracker_2components_2sim800_l__driver_2sim800_l__driver_8hdep">
<area shape="rect" title="SIM800L driver configuration for ESP12/ESP8266." alt="" coords="216,5,382,80"/>
<area shape="rect" href="_n_e_o__6_m_8h.html" title="NEO&#45;6M GPS driver for ESP12/ESP8266." alt="" coords="75,136,262,195"/>
<area shape="poly" title=" " alt="" coords="250,93,201,138,197,134,246,89"/>
<area shape="rect" href="main_8c.html" title="Main application file for ESP12 integrating SIM800L, NEO&#45;6M GPS, and OTA update functionality." alt="" coords="216,259,382,301"/>
<area shape="poly" title=" " alt="" coords="302,95,302,258,296,258,296,95"/>
<area shape="rect" href="sim800_l__driver_8c.html" title="SIM800L driver for ESP12/ESP8266 handling SMS, network registration, and deep sleep." alt="" coords="336,128,502,203"/>
<area shape="poly" title=" " alt="" coords="348,90,384,126,381,129,345,93"/>
<area shape="rect" href="_n_e_o__6_m_8c.html" title="NEO&#45;6M GPS driver for ESP12/ESP8266." alt="" coords="5,251,193,309"/>
<area shape="poly" title=" " alt="" coords="145,209,119,251,114,249,141,206"/>
<area shape="poly" title=" " alt="" coords="215,203,277,256,273,260,211,207"/>
</map>
</div>
</div>
<p><a href="sim800_l__driver_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a24ce82617af918b32bdbbbba83f60a6c" id="r_a24ce82617af918b32bdbbbba83f60a6c"><td class="memItemLeft" align="right" valign="top"><a id="a24ce82617af918b32bdbbbba83f60a6c" name="a24ce82617af918b32bdbbbba83f60a6c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_SIM800_NUM</b>&#160;&#160;&#160;UART_NUM_0</td></tr>
<tr class="memdesc:a24ce82617af918b32bdbbbba83f60a6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART port used for SIM800 communication. <br /></td></tr>
<tr class="separator:a24ce82617af918b32bdbbbba83f60a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b29aea9be7e4dc52dfea9adf8203c96" id="r_a0b29aea9be7e4dc52dfea9adf8203c96"><td class="memItemLeft" align="right" valign="top"><a id="a0b29aea9be7e4dc52dfea9adf8203c96" name="a0b29aea9be7e4dc52dfea9adf8203c96"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_SIM800_BAUD</b>&#160;&#160;&#160;9600</td></tr>
<tr class="memdesc:a0b29aea9be7e4dc52dfea9adf8203c96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Baud rate for SIM800 UART communication. <br /></td></tr>
<tr class="separator:a0b29aea9be7e4dc52dfea9adf8203c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6821bafc3c88dfb2e433a095df9940c6" id="r_a6821bafc3c88dfb2e433a095df9940c6"><td class="memItemLeft" align="right" valign="top"><a id="a6821bafc3c88dfb2e433a095df9940c6" name="a6821bafc3c88dfb2e433a095df9940c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUF_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a6821bafc3c88dfb2e433a095df9940c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of UART buffer for reading/writing data. <br /></td></tr>
<tr class="separator:a6821bafc3c88dfb2e433a095df9940c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeacf6696483cf5246f959f837c0b391" id="r_abeacf6696483cf5246f959f837c0b391"><td class="memItemLeft" align="right" valign="top"><a id="abeacf6696483cf5246f959f837c0b391" name="abeacf6696483cf5246f959f837c0b391"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SIM_gpio</b>&#160;&#160;&#160;14</td></tr>
<tr class="memdesc:abeacf6696483cf5246f959f837c0b391"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO used to indicate SIM800 status (e.g., LED blink) <br /></td></tr>
<tr class="separator:abeacf6696483cf5246f959f837c0b391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fec1837865bfea37ebfb2589fc3449" id="r_a24fec1837865bfea37ebfb2589fc3449"><td class="memItemLeft" align="right" valign="top"><a id="a24fec1837865bfea37ebfb2589fc3449" name="a24fec1837865bfea37ebfb2589fc3449"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SMS_MAX_RETRIES</b>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a24fec1837865bfea37ebfb2589fc3449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of retries if SMS sending fails. <br /></td></tr>
<tr class="separator:a24fec1837865bfea37ebfb2589fc3449"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07799238caf3236198e45a548bd676c2" id="r_a07799238caf3236198e45a548bd676c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07799238caf3236198e45a548bd676c2">sim800_task</a> (void *arg)</td></tr>
<tr class="memdesc:a07799238caf3236198e45a548bd676c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main task for SIM800 operation.  <br /></td></tr>
<tr class="separator:a07799238caf3236198e45a548bd676c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SIM800L driver configuration for ESP12/ESP8266. </p>
<dl class="section author"><dt>Author</dt><dd>yassine hattay </dd></dl>
<p>This module provides configuration and function declarations for interacting with the SIM800L module:</p><ul>
<li>Sending SMS with retries and delivery handling.</li>
<li>Monitoring network registration.</li>
<li>Triggering deep sleep before and after sending messages.</li>
</ul>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-09-09 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a07799238caf3236198e45a548bd676c2" name="a07799238caf3236198e45a548bd676c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07799238caf3236198e45a548bd676c2">&#9670;&#160;</a></span>sim800_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sim800_task </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main task for SIM800 operation. </p>
<p>This FreeRTOS task handles:</p><ul>
<li>Measuring battery voltage.</li>
<li>Initializing and configuring the SIM800 module.</li>
<li>Waiting for network registration with retries.</li>
<li>Preparing and sending an SMS with coordinates and battery voltage.</li>
<li>Performing soft reset and deep sleep on failure or after sending.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Task argument (unused). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_19769f0391bf4b2beba796a7060f00ed.html">sim800L_driver</a></li><li class="navelem"><a class="el" href="sim800_l__driver_8h.html">sim800L_driver.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
